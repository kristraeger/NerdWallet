! function(a) {
    window.NWA = {}, window.NWA.debug = a(this, window.NWA, window.$)
}(function(a, b, c) {
    var d = function(a) {
        var b = document.domain;
        (-1 !== b.indexOf("nerdwallet.biz") || -1 !== b.indexOf("localnerd")) && "object" == typeof console && console.log(a)
    };
    return d
}),
function(a) {
    window.NWA.polyfills = a(this, window.NWA)
}(function(a, b) {
    var c = function() {},
        d = Function.prototype.bind,
        e = Object.create,
        f = Array.prototype.slice,
        g = function(a) {
            return "function" == typeof a || !1
        },
        h = function(a) {
            var b = typeof a;
            return "function" === b || "object" === b && !!a
        },
        i = function(a) {
            if (!h(a)) return {};
            if (e) return e(a);
            c.prototype = a;
            var b = new c;
            return c.prototype = null, b
        },
        j = function(a, b, c, d, e) {
            if (!(d instanceof b)) return a.apply(c, e);
            var f = i(a.prototype),
                g = a.apply(f, e);
            return h(g) ? g : f
        },
        k = function(a, b) {
            if (d && a.bind === d) return d.apply(a, f.call(arguments, 1));
            if (!g(a)) throw new TypeError("Bind must be called on a function");
            var c = f.call(arguments, 2),
                e = function() {
                    return j(a, e, b, this, c.concat(f.call(arguments)))
                };
            return e
        };
    return {
        bind: k
    }
}),
function(a) {
    window.NWA.utils = a(this, window.NWA, window.$)
}(function(a, b, c) {
    function d() {
        var a = (new Date).getTime(),
            b = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(b) {
                var c = (a + 16 * Math.random()) % 16 | 0;
                return a = Math.floor(a / 16), ("x" == b ? c : 3 & c | 8).toString(16)
            });
        return b
    }

    function e(a) {
        return b.metadata.get("baseProtocol").concat("://logger.").concat(b.metadata.get("baseDomain")).concat("string" === c.type(a) ? a : "")
    }

    function f(a) {
        var b = c("meta[name='" + a + "']");
        return b.length > 0 ? b.attr("content") : null
    }

    function g(a) {
        var b = a[0],
            d = b.getBoundingClientRect();
        return !(d.bottom <= 0 || d.right <= 0 || d.top >= c(window).height() || d.left >= c(window).width())
    }

    function h(a) {
        var b = [];
        return c.each(a, function(a, c) {
            c === !0 && b.push(a)
        }), b
    }
    return {
        generateUUID: d,
        getLoggerUrl: e,
        getMetaContentByName: f,
        isElementInViewport: g,
        keysWithTrueValues: h
    }
}),
function(a) {
    window.NWA.dispatcher = a(this, window.NWA, window.$)
}(function(a, b, c) {
    function d() {
        this.queue = []
    }
    return d.prototype.checkPost = function(a, b) {
        var c = b.serializeWithCookieAndBrowserSessionIds || this.serializeWithCookieAndBrowserSessionIds;
        return b.checkCookieId && !b.cookieIdSet ? this.queue.push({
            ajaxExtensions: a,
            serializeWithCookieAndBrowserSessionIds: c
        }) : (a.data = c(a.data), void this.post(a, 0, b.blockRetry))
    }, d.prototype.defaultHandle = function(a) {}, d.prototype.retryOnFail = function(a, c) {
        var d = this;
        return function(e) {
            c > b.metadata.get("max_retries") || window.setTimeout(function() {
                d.post(a, c)
            }, b.metadata.get("retry_delay"))
        }
    }, d.prototype.onUserIdSet = function() {
        for (; this.queue.length;) {
            var a = this.queue.shift(),
                c = a.ajaxExtensions;
            c.data = a.serializeWithCookieAndBrowserSessionIds(c.data, b.metadata.get("userId"), b.metadata.get("browserSessionId")), this.post(c)
        }
    }, d.prototype.post = function(a, b, d) {
        b = "undefined" != typeof b ? b : 0;
        var e = {
                contentType: "application/json",
                error: 1 == d ? this.defaultHandle : this.retryOnFail(a, b + 1),
                success: this.defaultHandle,
                type: "POST",
                xhrFields: {
                    withCredentials: !0
                }
            },
            f = c.extend(e, a);
        c.ajax(f)
    }, d.prototype.serializeWithCookieAndBrowserSessionIds = function(a, b, c) {
        return b && (a.header.cookieId = b), c && (a.header.browserSessionId = c), JSON.stringify(a)
    }, d.prototype.subscribe = function() {
        b.eventCenter.subscribe("userId_set", b.polyfills.bind(this.onUserIdSet, this))
    }, new d
}),
function(a) {
    window.NWA.eventCenter = a(this, window.NWA)
}(function(a, b) {
    function c() {}
    var d = {
        formInputChanged: [],
        creditCardImpression: [],
        creditCardsState_set: [],
        offerClientImpression: [],
        offerClientState_set: [],
        heartbeat: [],
        pageView: [],
        userId_set: [],
        customEvent: [],
        reportCCImpression: []
    };
    return c.prototype.inspect = function() {
        return d
    }, c.prototype.publish = function(a, c) {
        return this.validateEvent(a) ? void $.each(d[a], function(a, b) {
            b(void 0 !== c ? c : {})
        }) : void b.debug("Invalid event: " + a)
    }, c.prototype.subscribe = function(a, c) {
        if (!this.validateEvent(a)) return void b.debug("Invalid event: " + a);
        var e = d[a].push(c) - 1;
        return {
            remove: function() {
                delete d[a][e]
            }
        }
    }, c.prototype.validateEvent = function(a) {
        return d.hasOwnProperty(a) ? !0 : !1
    }, new c
}),
function(a) {
    window.NWA.HeartbeatTracker = a(this, window.NWA, window.$)
}(function(a, b, c) {
    function d() {
        this.eventName = "heartbeat", this.initialTS, this.intervalId, this.windowFocus = !0
    }
    return d.prototype.resetHeartbeat = function() {
        var a = this,
            d = 1e3,
            e = 60 * d,
            f = function() {
                Date.now() - a.initialTS < e ? a.intervalId = window.setTimeout(f, 5 * d) : Date.now() - a.initialTS < 10 * e && (a.intervalId = window.setTimeout(f, e)), b.eventCenter.publish(a.eventName, {
                    timeElapsed: Date.now() - a.initialTS,
                    windowFocus: a.windowFocus
                })
            };
        this.initialTS = Date.now(), c(window).focus(function() {
            a.windowFocus = !0
        }).blur(function() {
            a.windowFocus = !1
        }), this.intervalId && window.clearTimeout(this.intervalId), a.intervalId = window.setTimeout(f, 5 * d)
    }, d.prototype.subscribe = function() {
        b.eventCenter.subscribe("pageView", b.polyfills.bind(this.resetHeartbeat, this))
    }, d
}),
function(a) {
    window.NWA.metadata = a(this, window.NWA, window.$)
}(function(a, b, c) {
    function d() {
        this.set("initialPageViewSent", !1)
    }
    var e = {
            LOGGED_IN: "logged_in",
            LOGGED_OUT: "logged_out"
        },
        f = {},
        g = ["creditCardsState", "offerClientState", "userId"];
    return d.prototype.all = function() {
        return f
    }, d.prototype.collectInitial = function() {
        this._setBaseDomain(), this._setOptimizelyData(), this._setVariantIds(), this._setBCCId(), this._setInitialGAUserAuthenticationState(), this._setURLBasedImpressionPaths(), this.set("url", window.location.href), this.set("referrer", document.referrer), this.set("max_retries", 3), this.set("retry_delay", 1e3), this.generatePageViewId()
    }, d.prototype.generatePageViewId = function() {
        this.set("pageViewId", b.utils.generateUUID())
    }, d.prototype.get = function(a) {
        return f[a]
    }, d.prototype.getAnalyticsHeader = function(a) {
        var b = {
            pageviewId: this.get("pageViewId"),
            referrer: this.get("referrer"),
            url: this.get("url")
        };
        return this.get("userId") && (b.cookieId = this.get("userId")), this.get("browserSessionId") && (b.browserSessionId = this.get("browserSessionId")), c.extend(b, void 0 !== a ? a : {})
    }, d.prototype.onPageView = function(a) {
        this._setTaxonomyInfo(), this.get("initialPageViewSent") && (this.set("referrer", this.get("url")), this.set("url", window.location.href), this.generatePageViewId())
    }, d.prototype.set = function(a, c) {
        return f[a] = c, -1 !== g.indexOf(a) && b.eventCenter.publish(a.concat("_set")), this
    }, d.prototype.subscribe = function() {
        b.eventCenter.subscribe("pageView", b.polyfills.bind(this.onPageView, this))
    }, d.prototype._setBaseDomain = function() {
        var a = "https",
            b = "nerdwallet.com",
            c = document.domain; - 1 !== c.indexOf("localnerd.nerdwallet.com") ? (b = "localnerd.nerdwallet.com", a = "http") : -1 !== c.indexOf("nerdwallet.biz") && (b = "nerdwallet.biz"), this.set("baseProtocol", a), this.set("baseDomain", b)
    }, d.prototype._setURLBasedImpressionPaths = function() {
        var a = [
                ["com/redirect.php", "c=taxes"],
                ["com/redirect.php", "c=credit_scores"],
                ["com/redirect.php", "c=prepaid_cards"],
                ["investing", "lookup"], "rates/redirect_new", "rates/redirect.php", "insurance/products", "insurance/providers", "investing/network-links/"
            ],
            b = a.map(function(a) {
                var b = a;
                Array.isArray(a) || (b = [a]);
                var c = b.map(function(a) {
                    return '[href*="' + a + '"]'
                });
                return "a" + c.join("")
            }).join();
        this.set("genericURLSelector", b)
    }, d.prototype._setTaxonomyInfo = function() {
        "undefined" != typeof nwPageTaxonomy && (this.set("taxonomyVertical", nwPageTaxonomy.vertical), this.set("taxonomyTopic", nwPageTaxonomy.topic), this.set("taxonomyPageType", nwPageTaxonomy.pageType))
    }, d.prototype._setOptimizelyData = function() {
        var a = {
            e: []
        };
        if ("optimizely" in window && void 0 !== window.optimizely.data && void 0 !== window.optimizely.data.state && void 0 !== window.optimizely.data.experiments) {
            var b = window.optimizely.data;
            for (i = 0; i < b.state.activeExperiments.length; i++) {
                var c = b.state.activeExperiments[i];
                a.e[i] = {
                    exp: b.experiments[c].name,
                    expId: c,
                    "var": b.state.variationNamesMap[c],
                    varId: b.state.variationIdsMap[c][0]
                }
            }
            a.oe = b.state.variationMap
        } else a.opt_found = !1;
        this.set("optimizelyData", a)
    }, d.prototype._setVariantIds = function() {
        var a = b.utils.getMetaContentByName("variant-ids"),
            d = a ? a.split(",") : [],
            e = c.map(d, function(a, b) {
                return parseInt(a)
            });
        this.set("variantIds", e)
    }, d.prototype._setBCCId = function() {
        var a = b.utils.getMetaContentByName("bcc-id");
        this.set("bccId", a)
    }, d.prototype.GA_USER_AUTHENTICATION_STATE = e, d.prototype._setInitialGAUserAuthenticationState = function() {
        this.set("gaUserAuthenticationState", b.utils.getMetaContentByName("ga-user-authentication-state"))
    }, new d
}),
function(a) {
    window.NWA.GALogger = a(this, window.NWA)
}(function(a, b) {
    function c() {
        var a = {
            pageView: b.polyfills.bind(this.onPageView, this)
        };
        b.Logger.call(this, {
            eventCenter: b.eventCenter,
            subscriptions: a
        }), this.initialPageViewFired = !1
    }
    return c.prototype.onPageView = function(a) {
        return this.initialPageViewFired ? (ga("set", "location", b.metadata.get("url")), ga("set", "dimension3", b.metadata.get("gaUserAuthenticationState")), void ga("send", "pageview")) : void(this.initialPageViewFired = !0)
    }, c.prototype.subscribe = function() {
        b.Logger.prototype.subscribe.call(this)
    }, c
}),
function(a) {
    window.NWA.Logger = a(this, window.NWA, window.$)
}(function(a, b, c) {
    function d(a) {
        this.eventCenter = a.eventCenter, this.subscriptions = a.subscriptions
    }
    return d.prototype.subscribe = function() {
        var a = this;
        c.each(this.subscriptions, function(b, c) {
            a.eventCenter.subscribe(b, c)
        })
    }, d
}),
function(a) {
    window.NWA.PageViewLogger = a(this, window.NWA, window.$)
}(function(a, b, c) {
    function d() {
        var a = {
            pageView: b.polyfills.bind(this.onPageView, this)
        };
        b.Logger.call(this, {
            eventCenter: b.eventCenter,
            subscriptions: a
        })
    }
    return d.prototype.handleFirst = function(a) {
        b.metadata.set("browserSessionId", a.browserSessionId), b.metadata.set("userId", a.userId), window.NW.analytics.identifyUser(a.userId), window.NW.analytics.pageView()
    }, d.prototype.onPageView = function(a) {
        var d = this,
            e = b.metadata.get("variantIds"),
            f = b.metadata.get("bccId"),
            g = {
                tracking_method: "pipeline",
                logger: c.extend({
                    header: b.metadata.getAnalyticsHeader({
                        eventName: "PAGE_VIEW_EVENT"
                    })
                }, this._getTaxonomyInfo())
            };
        e.length && (g.logger.variantIds = e), null !== f && (g.bccId = f);
        var h = {
            contentType: "application/x-www-form-urlencoded",
            data: g,
            url: "/lib/opt.php"
        };
        this.send(h, g.logger.header.cookieId ? !0 : !1), window.setTimeout(function() {
            var a = {
                    p: window.location.pathname + window.location.search,
                    r: b.metadata.get("referrer")
                },
                e = {
                    tracking_method: "counter",
                    data: c.extend(a, b.metadata.get("optimizelyData")),
                    logger: {
                        header: b.metadata.getAnalyticsHeader({})
                    }
                },
                f = {
                    contentType: "application/x-www-form-urlencoded",
                    data: e,
                    url: "/lib/opt.php"
                };
            d.send(f, !0)
        }, 100)
    }, d.prototype.send = function(a, d) {
        var e = !0;
        b.metadata.get("initialPageViewSent") || (a = c.extend(a, {
            success: this.handleFirst
        }), e = !1, b.metadata.set("initialPageViewSent", !0)), b.dispatcher.checkPost(a, {
            checkCookieId: e,
            cookieIdSet: d,
            serializeWithCookieAndBrowserSessionIds: this.serializeWithCookieAndBrowserSessionIds
        })
    }, d.prototype.serializeWithCookieAndBrowserSessionIds = function(a, b, c) {
        return b && (a.logger.cookieId = b), c && (a.logger.browserSessionId = c), a.data = JSON.stringify(a.data), a.logger = JSON.stringify(a.logger), a.variantIds && (a.variantIds = JSON.stringify(a.variantIds)), a
    }, d.prototype.subscribe = function() {
        b.Logger.prototype.subscribe.call(this)
    }, d.prototype._getTaxonomyInfo = function() {
        var a = {},
            d = ["taxonomyVertical", "taxonomyTopic", "taxonomyPageType"];
        return c.each(d, function(c, d) {
            var e = b.metadata.get(d);
            e && (a[d] = e)
        }), a
    }, d
}),
function(a) {
    window.NWA.PipelineLogger = a(this, window.NWA, window.$)
}(function(a, b, c) {
    function d() {
        var a = {
            heartbeat: b.polyfills.bind(this.onHeartbeat, this),
            creditCardImpression: b.polyfills.bind(this.onCreditCardImpression, this),
            formInputChanged: b.polyfills.bind(this.onFormInputChanged, this),
            customEvent: b.polyfills.bind(this.onCustomEvent, this),
            offerClientImpression: b.polyfills.bind(this.onOfferClientImpression, this)
        };
        b.Logger.call(this, {
            eventCenter: b.eventCenter,
            subscriptions: a
        })
    }
    return d.prototype.onHeartbeat = function(a) {
        this.onCustomEvent({
            eventName: "HEARTBEAT_EVENT",
            endpoint: "heartbeat",
            blockRetry: !0,
            info: {
                timeElapsed: a.timeElapsed,
                windowFocus: a.windowFocus
            }
        })
    }, d.prototype.onCreditCardImpression = function(a) {
        this.onCustomEvent({
            eventName: "CC_IMPRESSION_EVENT",
            endpoint: "ccimpression",
            info: a
        })
    }, d.prototype.onOfferClientImpression = function(a) {
        var b = a.impressionHeader.vertical;
        delete a.impressionHeader.vertical, a.impressionHeader.category = b + " Offers", this.onCustomEvent({
            eventName: b.toUpperCase().replace(/ /g, "_") + "_IMPRESSION_EVENT",
            endpoint: "event",
            info: a
        })
    }, d.prototype.onFormInputChanged = function(a) {
        this.onCustomEvent({
            eventName: "FORM_INPUT_CHANGED_EVENT",
            endpoint: "form_input_changed",
            info: a
        })
    }, d.prototype.onCustomEvent = function(a) {
        var d = b.metadata.getAnalyticsHeader({
                eventName: a.eventName
            }),
            e = c.extend({
                header: d
            }, a.info),
            f = b.utils.getLoggerUrl("/api/v1/activity/" + a.endpoint),
            g = {
                contentType: "application/json",
                data: e,
                url: f
            };
        this.send(g, !!e.header.cookieId, a.blockRetry)
    }, d.prototype.send = function(a, c, d) {
        b.dispatcher.checkPost(a, {
            checkCookieId: !0,
            cookieIdSet: c,
            blockRetry: d
        })
    }, d.prototype.subscribe = function() {
        b.Logger.prototype.subscribe.call(this)
    }, d
}),
function(a) {
    window.NWA.BaseClickReporter = a(this, window.NWA, window.$)
}(function(a, b, c) {
    function d(a, b, c) {
        this.selector = b, this.vertical = a, this.impressionReporter = c
    }
    return d.prototype.flattenEventDict = function(a, b) {
        var c = "";
        for (var d in b) {
            var e = b[d];
            "string" == typeof e || "number" == typeof e ? c += "&" + encodeURIComponent(a + d) + "=" + encodeURIComponent(e) : "object" == typeof e && (c += this.flattenEventDict(a + d + "_", e))
        }
        return c
    }, d.prototype.augmentLink = function(a, d, e) {
        if (!(a.attr("href").indexOf("header_pageViewId") > -1)) {
            var f, g = b.BaseImpressionReporter.prototype.generateKey.call(this, a, this.vertical),
                h = b.metadata.get("impressionsFired")[e][g];
            "undefined" == typeof h && (h = this.impressionReporter.constructImpression(a)), h = c.extend(!0, {}, h), h.clickHeader = h.impressionHeader, delete h.impressionHeader, h.header_pageViewId = b.metadata.get("pageViewId"), -1 == a.attr("href").indexOf("pos=") && (h.pos = h.clickHeader.productPosition);
            var i = this.flattenEventDict("", h); - 1 === d.indexOf("?") && (i = i.replace("&", "?")), f = d.indexOf("localnerd") > -1 ? d + i : d.replace("http:", "https:") + i, a.attr("href", f)
        }
    }, d.prototype.listen = function() {
        var a = this,
            b = "mousedown contextmenu click focus";
        "ontouchstart" in window && (b = "touchstart contextmenu click focus"), c("body").on(b, a.selector, function(b) {
            var d = c(this);
            a.augmentLink(d, this.href, a.vertical), "click" == b.type && (b.ctrlKey || b.metaKey || "_blank" === d.attr("target") ? window.open(d.attr("href")) : window.location = d.attr("href"), b.preventDefault())
        })
    }, d
}),
function(a) {
    window.NWA.BaseImpressionReporter = a(this, window.NWA, window.$)
}(function(a, b, c) {
    function d(a, c) {
        this.firedImpressions = [], this.vertical = a, this.selector = c, this.paths = [], "impressionsFired" in b.metadata.all() || b.metadata.set("impressionsFired", {}), b.metadata.get("impressionsFired")[a] = {}
    }
    return d.prototype.onToolPage = function() {
        var a = b.metadata.get("baseDomain"),
            c = b.metadata.get("url");
        return !!this.paths.filter(function(b) {
            return -1 !== c.indexOf(a.concat(b))
        }).length
    }, d.prototype.generateKey = function(a, b) {
        return "CC" === b ? a.attr("data-cid") + " " + (a.attr("data-instance-id") || "unknown") + " " + (a.attr("data-link-type") || "unknown") : "OfferClient" === b ? a.attr("data-vertical") + " " + a.attr("data-cid") + " " + (a.attr("data-instance-id") || "unknown") + " " + (a.attr("data-link-type") || "unknown") : a.attr("href")
    }, d.prototype.stashImpression = function(a, c) {
        "impressionsFired" in b.metadata.all() || b.metadata.set("impressionsFired", {});
        var d = b.metadata.get("impressionsFired");
        this.vertical in d || (d[this.vertical] = {});
        var e = d[this.vertical];
        e[c] = a
    }, d.prototype.onPageView = function() {
        this.onToolPage() || (this.firedImpressions = [], b.metadata.get("impressionsFired")[this.vertical] = {}, window.setTimeout(b.polyfills.bind(this.report, this), 100))
    }, d.prototype.getImpressionHeader = function(a, c) {
        var d = {
                impressionId: b.utils.generateUUID(),
                productId: c.attr("data-cid"),
                productSlug: c.attr("data-cname"),
                productLocation: c.attr("data-clocation") || "body",
                vertical: c.attr("data-vertical"),
                category: c.attr("data-ctype"),
                linkType: c.attr("data-link-type") || "unknown",
                productInstance: c.attr("data-instance-id") || "unknown",
                productPosition: a,
                offerVersionId: c.attr("data-offer-version-id")
            },
            e = b.metadata.get(this.metadataKey);
        return this.onToolPage() && e && e.filters && (d.pageNumber = e.filters.page), d
    }, d.prototype.report = function() {
        var a = c(this.selector);
        if (0 !== a.length) {
            var d = this,
                e = d.collectFilters(),
                f = {},
                g = 0;
            a.each(function() {
                var a = c(this),
                    h = d.generateKey(a, d.vertical),
                    i = h in f,
                    j = -1 !== c.inArray(h, d.firedImpressions);
                i || (f[h] = !0, g++), !j && b.utils.isElementInViewport(a) && d.fireImpression.call(d, g, a, e)
            })
        }
    }, d.prototype.listen = function() {
        console.warn("ImpressionReporters must provide a listen method.")
    }, d
}),
function(a) {
    window.NWA.CCClickReporter = a(this, window.NWA, window.$)
}(function(a, b, c) {
    function d() {
        b.BaseClickReporter.call(this, "CC", '[data-track-click][data-ctype="Credit Card"]', new b.CCImpressionReporter)
    }
    return d.prototype = new b.BaseClickReporter, d.prototype.constructor = d, d
}),
function(a) {
    window.NWA.CCImpressionReporter = a(this, window.NWA, window.$)
}(function(a, b, c) {
    function d() {
        b.BaseImpressionReporter.call(this, "CC", '[data-track-impression][data-ctype="Credit Card"]'), this.metadataKey = "creditCardsState", this.paths = ["/balance-transfer-credit-cards", "/business-credit-cards", "/cash-back-credit-cards", "/low-interest-credit-cards", "/rewards-credit-cards", "/student-credit-cards", "/travel-miles-credit-cards", "/zero-percent-credit-cards", "/prequalify/credit-cards"]
    }
    return d.prototype = new b.BaseImpressionReporter, d.prototype.constructor = d, d.prototype.collectFilters = function() {
        var a = b.metadata.get(this.metadataKey),
            c = a ? a.filters : null,
            d = b.utils.keysWithTrueValues;
        return c ? {
            cardNetworkFilter: d(c.card_network).join(","),
            creditScoreFilter: c.credit_score.value,
            feesFilter: d(c.fees).join(","),
            financialInstitutionsFilter: d(c.financial_institution).join(","),
            monthlySpendFilter: c.monthly_spend.total,
            yearsWithCardFilter: c.time_with_card.value
        } : {}
    }, d.prototype.constructImpression = function(a) {
        var b = this,
            d = c(this.selector).index(a) + 1,
            e = b.collectFilters(),
            f = a.attr("data-cid"),
            g = (this.generateKey(a, this.vertical), this.getCardDataFromJs(f));
        return g.impressionHeader = this.getImpressionHeader(d, a), g = c.extend(g, e)
    }, d.prototype.fireImpression = function(a, d, e) {
        var f = d.attr("data-cid"),
            g = this.generateKey(d, this.vertical),
            h = this.getCardDataFromJs(f);
        h.impressionHeader = this.getImpressionHeader(a, d), h = c.extend(h, e), this.firedImpressions.push(g), this.stashImpression(h, g, self.vertical), b.eventCenter.publish("creditCardImpression", h)
    }, d.prototype.getCardDataFromJs = function(a) {
        var d, e = b.metadata.get(this.metadataKey),
            f = e ? e.cards : null,
            g = {};
        return f && this.onToolPage() && (c.each(f.cards, function(b, c) {
            d = c.id.toString() === a ? c : d
        }), g.annualFee = d.annual_fee.value.toString(), g.issuer = d.issuer, g.balanceTransferFee = d.apr.balance_transfer.fee.toString()), g
    }, d.prototype.listen = function() {
        (this.onToolPage() || 0 !== c(this.selector).length) && (c(window).on("resize scroll", b.polyfills.bind(this.report, this)), b.eventCenter.subscribe("pageView", b.polyfills.bind(this.onPageView, this)), b.eventCenter.subscribe("creditCardsState_set", b.polyfills.bind(this.onCreditCardsSet, this)), b.eventCenter.subscribe("reportCCImpression", b.polyfills.bind(this.report, this)))
    }, d.prototype.onCreditCardsSet = function() {
        this.firedImpressions = [], b.metadata.get("impressionsFired")[this.vertical] = {}, window.setTimeout(b.polyfills.bind(this.report, this), 100)
    }, d
}),
function(a) {
    window.NWA.OfferClientClickReporter = a(this, window.NWA, window.$)
}(function(a, b, c) {
    function d() {
        b.BaseClickReporter.call(this, "OfferClient", '[data-track-click][data-ctype="Offer"][data-cid][data-vertical]', new b.OfferClientImpressionReporter)
    }
    return d.prototype = new b.BaseClickReporter, d.prototype.constructor = d, d
}),
function(a) {
    window.NWA.OfferClientImpressionReporter = a(this, window.NWA, window.$)
}(function(a, b, c) {
    function d() {
        b.BaseImpressionReporter.call(this, "OfferClient", '[data-track-impression][data-ctype="Offer"][data-cid][data-vertical]'), this.metadataKey = "offerClientState", this.paths = ["/small-business-loans", "/personal-loans"], this.validVerticals = ["SMB", "Personal Loans"].map(function(a) {
            return a.toUpperCase()
        })
    }
    return d.prototype = new b.BaseImpressionReporter, d.prototype.constructor = d, d.prototype.collectFilters = function() {
        var a = b.metadata.get(this.metadataKey) || {};
        return _.omit(a, ["offers"])
    }, d.prototype.constructImpression = function(a) {
        var b = c(this.selector).index(a) + 1,
            d = this.collectFilters(),
            e = a.attr("data-cid"),
            f = this.getCardDataFromJs(e),
            g = {
                impressionHeader: this.getImpressionHeader(b, a)
            };
        return c.extend({}, f, g, d)
    }, d.prototype.fireImpression = function(a, d, e) {
        var f = d.attr("data-cid"),
            g = this.generateKey(d, this.vertical),
            h = this.getCardDataFromJs(f),
            i = this.getImpressionHeader(a, d);
        if (-1 !== this.validVerticals.indexOf(i.vertical.toUpperCase())) {
            var j = c.extend({}, h, {
                impressionHeader: i
            }, e);
            this.firedImpressions.push(g), this.stashImpression(j, g, self.vertical), b.eventCenter.publish("offerClientImpression", j)
        }
    }, d.prototype.getCardDataFromJs = function(a) {
        if (this.onToolPage()) {
            var c = b.metadata.get(this.metadataKey),
                d = c ? c.offers : null;
            if (d && a in d) return d[a]
        }
    }, d.prototype.listen = function() {
        this.onToolPage() && (c(window).on("resize scroll", b.polyfills.bind(this.report, this)), b.eventCenter.subscribe("pageView", b.polyfills.bind(this.onPageView, this)), b.eventCenter.subscribe("offerClientState_set", b.polyfills.bind(this.onClientStateSet, this)))
    }, d.prototype.onClientStateSet = function() {
        this.firedImpressions = [], b.metadata.get("impressionsFired")[this.vertical] = {}, window.setTimeout(b.polyfills.bind(this.report, this), 100)
    }, d
}),
function(a) {
    window.NWA.URLBasedClickReporter = a(this, window.NWA, window.$)
}(function(a, b, c) {
    function d() {
        var a = b.metadata.get("genericURLSelector");
        b.BaseClickReporter.call(this, "URLBased", a, new b.URLBasedImpressionReporter)
    }
    return d.prototype = new b.BaseClickReporter, d.prototype.constructor = d, d
}),
function(a) {
    window.NWA.URLBasedImpressionReporter = a(this, window.NWA, window.$)
}(function(a, b, c) {
    function d() {
        b.BaseImpressionReporter.call(this, "URLBased", '[data-track-impression][data-ctype="Null"]'), this.firedImpressions = []
    }
    return d.prototype = new b.BaseImpressionReporter, d.prototype.constructor = d, d.prototype.constructImpression = function(a) {
        var d = b.metadata.get("genericURLSelector");
        return {
            impressionHeader: {
                productPosition: c(d).index(a) + 1
            }
        }
    }, d.prototype.listen = function() {}, d
}),
function(a) {
    window.NWA.initialize = a(this, window.NWA, window.$)
}(function(a, b, c) {
    function d() {
        var a = [b.GALogger, b.PageViewLogger, b.PipelineLogger];
        c.each(a, function(a, b) {
            var c = new b;
            c.subscribe()
        })
    }

    function e() {
        var a = [b.CCImpressionReporter, b.CCClickReporter, b.OfferClientImpressionReporter, b.OfferClientClickReporter, b.URLBasedImpressionReporter, b.URLBasedClickReporter];
        c.each(a, function(a, b) {
            var c = new b;
            c.listen()
        })
    }

    function f() {
        var a = new b.HeartbeatTracker;
        a.subscribe()
    }
    var g = function() {
        b.metadata.collectInitial(), b.metadata.subscribe(), b.dispatcher.subscribe(), d(), e(), f()
    };
    return g
});